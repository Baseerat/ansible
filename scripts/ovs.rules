 ./ovs-ofctl --protocols=OpenFlow15 add-flow br0 "table=0,priority=100,ethernet__etherType=0x0800,ipv4__protocol=17,udp__dstPort=4789,vxlan__vni=0,inner_ethernet__etherType=0x0800,inner_ipv4__dstAddr=0xC0A8FEFE actions=resubmit(,1)"

prme-nsx-perf-004
 ./ovs-ofctl --protocols=OpenFlow15 add-flow br0 "table=1,priority=100 actions= \
 add_header:sr_, \
 set_field:0xFFFF->ethernet__etherType, \
 set_field:0x1->sr__portMap, \
 set_field:0x08->sr__srType, \
 deparse, \
 output:3, \
 remove_header:sr_, \
 set_field:0x0800->ethernet__etherType, \
 set_field:0x00259096604a->ethernet__dstAddr,set_field:0xAC108C9F->ipv4__dstAddr, \
 set_field:0x4ec91ec95297->inner_ethernet__dstAddr,set_field:0xC0A80278->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:2, \
 set_field:0x0025909664c2->ethernet__dstAddr,set_field:0xAC108CA0->ipv4__dstAddr, \
 set_field:0x929fb5bfba44->inner_ethernet__dstAddr,set_field:0xC0A80378->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:4"




 ./ovs-ofctl --protocols=OpenFlow15 add-flow br0 "table=1,priority=100 actions= \
 set_field:0x00259096604a->ethernet__dstAddr,set_field:0xAC108C9F->ipv4__dstAddr, \
 set_field:0xae62d695ec85->inner_ethernet__dstAddr,set_field:0xC0A80278->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:2, \
 set_field:0x0025909664c2->ethernet__dstAddr,set_field:0xAC108CA0->ipv4__dstAddr, \
 set_field:0x12c72841b469->inner_ethernet__dstAddr,set_field:0xC0A80378->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:4"




 ./ovs-ofctl --protocols=OpenFlow15 add-flow br0 "table=1,priority=100 actions= \
 set_field:0x00259096604a->ethernet__dstAddr,set_field:0xAC108C9F->ipv4__dstAddr, \
 set_field:0xae62d695ec85->inner_ethernet__dstAddr,set_field:0xC0A80278->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:2, \
 set_field:0x0025909664c2->ethernet__dstAddr,set_field:0xAC108CA0->ipv4__dstAddr, \
 set_field:0x12c72841b469->inner_ethernet__dstAddr,set_field:0xC0A80378->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:4, \
 set_field:0x0025909663c1->ethernet__dstAddr,set_field:0xAC108C60->ipv4__dstAddr, \
 set_field:0xc63c475daeb2->inner_ethernet__dstAddr,set_field:0xC0A80778->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:3, \
 set_field:0x00259096665f->ethernet__dstAddr,set_field:0xAC108C61->ipv4__dstAddr, \
 set_field:0xf2ca5f2a602b->inner_ethernet__dstAddr,set_field:0xC0A80878->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:3"




prme-nsx-perf-006
 ./ovs-ofctl --protocols=OpenFlow15 add-flow br0 "table=1,priority=100 actions= \
 add_header:sr_, \
 set_field:0xFFFF->ethernet__etherType, \
 set_field:0x1->sr__portMap, \
 set_field:0x08->sr__srType, \
 deparse, \
 output:3, \
 remove_header:sr_, \
 set_field:0x0800->ethernet__etherType, \
 set_field:0x0025909663c1->ethernet__dstAddr,set_field:0xAC108C60->ipv4__dstAddr, \
 set_field:0x5295e2452b40->inner_ethernet__dstAddr,set_field:0xC0A80778->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:4, \
 set_field:0x00259096665f->ethernet__dstAddr,set_field:0xAC108C61->ipv4__dstAddr, \
 set_field:0x7a3ec1847531->inner_ethernet__dstAddr,set_field:0xC0A80878->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:1"




./ovs-ofctl --protocols=OpenFlow15 add-flow br0 "table=1,priority=100 actions= \
 set_field:0x0025909663c1->ethernet__dstAddr,set_field:0xAC108C60->ipv4__dstAddr, \
 set_field:0xc63c475daeb2->inner_ethernet__dstAddr,set_field:0xC0A80778->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:4, \
 set_field:0x00259096665f->ethernet__dstAddr,set_field:0xAC108C61->ipv4__dstAddr, \
 set_field:0xf2ca5f2a602b->inner_ethernet__dstAddr,set_field:0xC0A80878->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:1, \
 set_field:0x00259096604a->ethernet__dstAddr,set_field:0xAC108C9F->ipv4__dstAddr, \
 set_field:0xae62d695ec85->inner_ethernet__dstAddr,set_field:0xC0A80278->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:3, \
 set_field:0x0025909664c2->ethernet__dstAddr,set_field:0xAC108CA0->ipv4__dstAddr, \
 set_field:0x12c72841b469->inner_ethernet__dstAddr,set_field:0xC0A80378->inner_ipv4__dstAddr, \
 calc_fields_update(inner_udp__checksum,csum16,fields:inner_ipv4__srcAddr,inner_ipv4__dstAddr,0x8'0,inner_ipv4__protocol,inner_udp__length_,inner_udp__srcPort,inner_udp__dstPort,inner_udp__length_,payload), \
 calc_fields_update(inner_ipv4__hdrChecksum,csum16,fields:inner_ipv4__version_ihl,inner_ipv4__diffserv,inner_ipv4__totalLen,inner_ipv4__identification,inner_ipv4__flags_fragOffset,inner_ipv4__ttl, \
 inner_ipv4__protocol,inner_ipv4__srcAddr,inner_ipv4__dstAddr), \
 calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
 deparse,output:3"




-----------------------------------------------------------

prme-nsx-perf-004
./ovs-ofctl --protocols=OpenFlow15 add-flow br0 "table=0,priority=100,ipv4__dstAddr=0xAC108C7B \
    actions=add_header:sr_, \
            set_field:0xFFFF->ethernet__etherType, \
            set_field:0x1->sr__portMap, \
            set_field:0x08->sr__srType, \
            deparse, \
            output:3"

prme-nsx-perf-005
./ovs-ofctl --protocols=OpenFlow15 add-flow br0 "table=0,priority=100,sr__portMap=0x01 \
    actions=remove_header:sr_, \
            set_field:0x0800->ethernet__etherType, \
            deparse, \
            output:1,2"

prme-nsx-perf-006
./ovs-ofctl --protocols=OpenFlow15 add-flow br0 "table=0,priority=100,ipv4__dstAddr=0xAC108C7B \
    actions=set_field:0xAC108C60->ipv4__dstAddr, \
    calc_fields_update(udp__checksum,csum16,fields:ipv4__srcAddr,ipv4__dstAddr,0x8'0,ipv4__protocol,udp__length_,udp__srcPort,udp__dstPort,udp__length_,payload), \
    calc_fields_update(ipv4__hdrChecksum,csum16,fields:ipv4__version_ihl,ipv4__diffserv,ipv4__totalLen,ipv4__identification,ipv4__flags_fragOffset,ipv4__ttl,ipv4__protocol,ipv4__srcAddr,ipv4__dstAddr), \
    deparse, \
    output:4"

